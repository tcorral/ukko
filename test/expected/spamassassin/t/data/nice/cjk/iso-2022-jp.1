From owner-mhonarc-users@mhonarc.org Mon Dec 16 14:31:36 2002
Return-Path: <owner-mhonarc-users@mhonarc.org>
Delivered-To: ach@xray.mpe.mpg.de
Received: (qmail 18769 invoked from network); 16 Dec 2002 14:31:36 -0000
Received: from mpehp1.mpe-garching.mpg.de (root@130.183.70.10)
  by o05.xray.mpe.mpg.de with SMTP; 16 Dec 2002 14:31:36 -0000
Received: from lorien.mallorn.com (lorien.mallorn.com [64.5.98.30])
	by mpehp1.mpe-garching.mpg.de (8.8.6 (PHNE_17135)/8.8.6) with ESMTP id PAA07075
	for <ach@mpe.mpg.de>; Mon, 16 Dec 2002 15:31:34 +0100 (MET)
Received: (from majordomo@localhost)
	by lorien.mallorn.com (8.11.6/8.11.6) id gBGE8lW08971;
	Mon, 16 Dec 2002 08:08:47 -0600
X-Envelope-From: shinichiro@stained-g.net
X-Envelope-To: <mhonarc-users@mhonarc.org>
Received: from st26.arena.ne.jp (st26.arena.ne.jp [210.136.155.2])
	by lorien.mallorn.com (8.11.6/8.11.6) with ESMTP id gBGE8ia08961
	for <mhonarc-users@mhonarc.org>; Mon, 16 Dec 2002 08:08:44 -0600
Received: (qmail 29852 invoked by uid 114); 16 Dec 2002 23:08:43 +0900
Received: from shinichiro@stained-g.net by st26.arena.ne.jp
	 by uid 111 with qmail-scanner-1.10 (sophie: 2.10/3.64. . Clear:0. Processed in 0.057111 secs); 16 Dec 2002 23:08:43 +0900
Received: from unknown (HELO lune.stained-g) (202.214.129.125)
  by stained-g.net with SMTP; 16 Dec 2002 23:08:43 +0900
Date: Mon, 16 Dec 2002 23:07:49 +0900
Message-ID: <87pts29hvu.wl@shinichiro.stained-g.net>
From: Shinichiro HIDA <shinichiro@stained-g.net>
To: mhonarc-users@mhonarc.org
Subject: MIME text/plain attach with Shift_JIS (CP932)
User-Agent: Wanderlust/2.9.15 (Unchained Melody) SEMI/1.14.4 (Hosorogi)
 FLIM/1.14.4 (=?ISO-8859-4?Q?Kashiharajing=FE-mae?=) APEL/10.4 MULE
 XEmacs/21.4 (patch 10) (Military Intelligence) (i386-debian-linux)
Organization: Stained Glass
X-GnuPG-Version: gpg (GnuPG) 1.2.1
X-GnuPG-Public-Key: http://www.stained-g.net/shinichiro/shinichiro-gpg.key
X-GnuPG-Fingerprint: 5F2D 1656 FFF6 F691 A51C  5E61 E416 D398 470C 1CE9
X-URI: http://www.stained-g.net/
X-Face: "+/#(k[%E{,A*R~]BQ;$}j4`A/l\!fGUsqWE]_Ss/CqBX091]WBCJVV<>gDweDL(-<hi=C<
 6^"4wCZ:$lS>H=6@cZA1x|W2F"DUf,5t7M[R[g@Y5qFZ2;u=]d#
MIME-Version: 1.0 (generated by SEMI 1.14.4 - "Hosorogi")
Content-Type: multipart/mixed;
 boundary="Multipart_Mon_Dec_16_23:07:49_2002-1"
Sender: owner-mhonarc-users@mhonarc.org
Precedence: bulk
Reply-To: mhonarc-users@mhonarc.org

--Multipart_Mon_Dec_16_23:07:49_2002-1
Content-Type: text/plain; charset=US-ASCII

Hi,

Now, I try to test MHonArc2002-12-16-snap.

Sometime, I would like to send the mail with some attachement in
the plain-text-file wrote with Shift_JIS for MS Windoze users.

;; Japanese Windows using Shift_JIS, the simple text file wrote with
;; Shift_JIS is easy hadling and editing with NOTEPAD for a lot of
;; Windoze users.

MHonArc could not handle these type attachement yet?

 Problem: unintelligible sequence of characters.
          plain/text file could not be attachement (only inline..).

If I send text/plain part with ISO-2022-JP or EUC-JP, view only
inline(would not be attachment), but no problem for reading.

like these
(I try content-disposition: attachment with base64)


--Multipart_Mon_Dec_16_23:07:49_2002-1
Content-Type: text/plain; charset=SHIFT_JIS
Content-Disposition: attachment; filename="test-sjis.txt"
Content-Transfer-Encoding: base64

grGCzIN0g0CDQ4OLgsyMYI6ugs2BQQ0KDQqVto6ag1KBW4NoKGNoYXJzZXQpICAgIDogU2hp
ZnRfSklTDQqJ/I1zg1KBW4NoKGxpbmUtYnJlYWspIDogQ1IgTEYNCg0KgsWCt4FCDQoNCg==

--Multipart_Mon_Dec_16_23:07:49_2002-1
Content-Type: text/plain; charset=US-ASCII


MHonArc converted as follow (source);
(I try content-disposition: inline with base64)


--Multipart_Mon_Dec_16_23:07:49_2002-1
Content-Type: text/plain; charset=US-ASCII
Content-Disposition: inline; filename="test-archive.txt"
Content-Transfer-Encoding: base64

PCEtLVgtSGVhZC1Cb2R5LVNlcC1FbmQtLT4KPCEtLVgtQm9keS1vZi1NZXNzYWdlLS0+Cgo8
cHJlPiYjeDk4REI7JiN4NzUzMDsmI3gzMDY3OyYjeDMwNTk7JiN4MzAwMjsKCiYjeDMwNTM7
JiN4MzA4QzsmI3gzMDZGOyYjeDMwMDE7dGV4dC9wbGFpbiBTaGlmdF9KSVMgJiN4MzA2QTsm
I3gzMEM2OyYjeDMwQUQ7JiN4MzBCOTsmI3gzMEM4OyYjeDMwRDU7JiN4MzBBMTsmI3gzMEE0
OyYjeDMwRUI7JiN4NkRGQjsmI3g0RUQ4OyYjeDMwNkU7JiN4MzBDNjsmI3gzMEI5OyYjeDMw
Qzg7JiN4MzA2NzsmI3gzMDU5OyYjeDMwMDI7CgogPT0gYXR0YWNobWVudCBzcGVjID09CiBv
IHRleHQvcGxhaW47IGNoYXJzZXQ9U2hpZnRfSklTIChDUkxGKQogbyBjb250ZW50LWRpc3Bv
c2l0aW9uOiBhdHRhY2htZW50OwogbyBlbmNvZGluZzogYmFzZTY0Cgo8L3ByZT48cHJlPj8m
I3hGRjcxOz8mI3hGRjhDOz90P0A/Qz8/PyYjeEZGOEM7P2A/JiN4RkY2RTs/JiN4RkY4RDs/
QQoKPyYjeEZGNzY7Pz8/Uj9bP2goY2hhcnNldCkgICAgOiBTaGlmdF9KSVMKPz8/cz9SP1s/
aChsaW5lLWJyZWFrKSA6IENSIExGCgo/JiN4RkY4NTs/JiN4RkY3Nzs/QgoKCgoKPC9wcmU+
PHByZT4KCjwvcHJlPjxwcmU+JiN4MzA0NjsmI3gzMDdFOyYjeDMwNEY7JiN4MzBBMjsmI3gz
MEZDOyYjeDMwQUI7JiN4MzBBNDsmI3gzMEQ2OyYjeDUxRkE7JiN4Njc2NTsmI3gzMDhCOyYj
eDMwNjc7JiN4MzA1NzsmI3gzMDg3OyYjeDMwNDY7JiN4MzA0Qjs/Cg==

--Multipart_Mon_Dec_16_23:07:49_2002-1
Content-Type: text/plain; charset=US-ASCII


I copy and convert charset CharEnt/EUC_JP.pm to CharEnt/SHIFT_JIS.pm
(trying by NKF and XEmacs 21.4.10 with mule-ucs, and Emacs 21.2 with mule-ucs)

;; I just had made "2002-12-02-snap" style one, refer from
;; http://www.unicode.org/ (-;
;; http://www.stained-g.net/shinichiro/mhonarc/CP932.pm.gz (and also bz2)
;; It's noneed now..

and adding follow 1 line in CharEnt.pm;

line 121:    'shift-jis'      => 'MHonArc/CharEnt/SHIFT_JIS.pm'

;; I'm sorry, I could not understand Perl..

I must through the sub functions in CharEnt.pm?

My .mrc file as follow;

<DecodeHeads>
<CharsetConverters>
ISO-2022-JP;    MHonArc::CharEnt::str2sgml; MHonArc/CharEnt.pm
Shift_JIS;      MHonArc::CharEnt::str2sgml; MHonArc/CharEnt.pm
iso-8859-1;     MHonArc::CharEnt::str2sgml; MHonArc/CharEnt.pm
iso-8859-4;     MHonArc::CharEnt::str2sgml; MHonArc/CharEnt.pm
</CharsetConverters>

<MIMEARGS>
m2h_external::filter; attachcheck
</MIMEARGS>

<MIMEFILTERS>
m2h_text_plain::filter; attachcheck,asis:us-ascii,default=iso-2022-jp
</MIMEFILTERS>

[...]

If I had some wrong settings, please pointing out.

Thanks.


-- 
  Shinichiro HIDA  mailto:shinichiro@stained-g.net
  GPG fingerprint = 5F2D 1656 FFF6 F691 A51C  5E61 E416 D398 470C 1CE9
--Multipart_Mon_Dec_16_23:07:49_2002-1--

---------------------------------------------------------------------
To sign-off this list, send email to majordomo@mhonarc.org with the
message text UNSUBSCRIBE MHONARC-USERS

